#!/bin/sh
# setup a parsgen dist to build on linux

# this script is a poor stand-in until I get my act together
# and make a real configure script


# generate the parsgen Makefile
setupMakefile() {
  mf=Makefile
  echo "creating $mf ..."

  # overcome my chmod below
  rm -f $mf

  echo "# Makefile for parsgen" > $mf || exit
  echo "# NOTE: generated by ./configure -- editing inadvisable" >> $mf
  echo "" >> $mf
  echo "ocaml := $ocaml" >> $mf
  echo "" >> $mf

  # add in the Linux cflags for now..
  cat $mf.in | sed 's/@CCFLAGS@/-D__LINUX__ -D__UNIX__/g' >> $mf

  # discourage editing ..
  chmod a-w $mf
}


# ---------- setup parsgen ----------
# generate Makefile
setupMakefile
